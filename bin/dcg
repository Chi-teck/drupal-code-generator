#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use DrupalCodeGenerator\GeneratorsDiscovery;
use DrupalCodeGenerator\Commands;
use Symfony\Component\Console\Application;

$application = new Application('Drupal Code Generator', '1.1.0');

$commands_directories = [
  // @TODO: Setup autoloader for other directories.
  dirname(__DIR__) . '/src/Commands',
];
$discovery = new GeneratorsDiscovery($commands_directories);
$generators = $discovery->getGenerators();
$application->addCommands($generators);

$navigation = new Commands\Navigation();
$navigation->init($generators);
$application->add($navigation);

$application->setDefaultCommand('navigation');
$application->run();
